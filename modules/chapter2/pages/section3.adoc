== Install and configure Istio with Sail Operator

Kuadrant integrates with **https://istio.io/latest/docs/[Istio]** as a _Gateway API_ provider.

In this lab, you install and set up an https://istio.io/latest/docs/[Istio]-based Gateway API provider by using the Sail Operator.

. Switch to the terminal where you had taken access of bastion server. Before you can use Kuadrant, you need to install Gateway API v1 by applying the YAML file provided in the URL shown below:
+
[subs="+quotes,+macros"]
----
[lab-user@bastion ~]$ **oc apply -f https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.0.0/standard-install.yaml**
customresourcedefinition.apiextensions.k8s.io/gatewayclasses.gateway.networking.k8s.io created
customresourcedefinition.apiextensions.k8s.io/gateways.gateway.networking.k8s.io created
customresourcedefinition.apiextensions.k8s.io/httproutes.gateway.networking.k8s.io created
customresourcedefinition.apiextensions.k8s.io/referencegrants.gateway.networking.k8s.io created
----

. Create **gateway-system** namespace where the Gateway components shall be deployed:
+
[subs="+quotes,+macros"]
----
[lab-user@bastion ~]$ **oc create ns gateway-system**
namespace/gateway-system created
----

. Execute the following command to apply the _Sail Operator Subscription_ yaml file directly from the URL:
+
[subs="+quotes,+macros"]
----
[lab-user@bastion ~]$ **oc apply -f https://raw.githubusercontent.com/RedHatQuickCourses/rhcl-qc-apps/main/sail-operator-subscription.yaml**
operatorgroup.operators.coreos.com/sail created
subscription.operators.coreos.com/sailoperator created
----

* Check the status of the installation using below command. When ready, the status will change from "installing" to "complete."
+
[subs="+quotes,+macros"]
----
[lab-user@bastion ~]$ **oc get installplan -n gateway-system -o=jsonpath='{.items[0].status.phase}'**
Complete
----

* Note that you can now see **Sail operator** in _Red Hat Openshift_ console's _Installed Operators_ section.
+
image::sail.png[align="center"]

. Configure Istio
* To configure the _Istio Gateway API_ provider, apply the yaml file from URL using below command:
+
[subs="+quotes,+macros"]
----
[lab-user@bastion ~]$ **oc apply -f https://raw.githubusercontent.com/RedHatQuickCourses/rhcl-qc-apps/refs/heads/main/istio-operator-config.yaml**
istio.operator.istio.io/default created
----

* Wait for Istio to be ready as follow:
+
[subs="+quotes,+macros"]
----
[lab-user@bastion ~]$ **oc wait istio/default -n gateway-system --for="condition=Ready=true"**
istio.operator.istio.io/default condition met
----
+
Once you notice the _condition met_ output for above command, proceed with next lab.