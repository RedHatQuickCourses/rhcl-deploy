== Create Auth Policy

In this lab, you set a **default, deny-all AuthPolicy to start with zero-trust** for your Gateway, ensuring no traffic is allowed unless explicitly permitted, and verifies its acceptance by the Kuadrant controller.

* Set a **default, deny-all AuthPolicy** for your Gateway by running the following command:
+
[subs="+quotes,+macros"]
----
[lab-user@bastion ~]$ **curl -s https://raw.githubusercontent.com/RedHatQuickCourses/rhcl-qc-apps/refs/heads/main/kuadrant-authpolicy.yaml | envsubst | oc apply -f -**
authpolicy.kuadrant.io/external-auth created
----

* Navigate to the Red Hat Openshift cluster and select **Operators** -> select **Installed Opertor** -> select **Kuadrant Operator** -> select **AuthPolicy** tab -> select **external-auth** and notice the **Conditions** section:
+
image::auth3.png[align="center"]
+
Note that the **Enforced** status is set to **False** as there is no route to enforce the policy.

* Confirm your auth policy was accepted by the controller as follows:
+
[subs="+quotes,+macros"]
----
[lab-user@bastion ~]$ **oc get authpolicy ${gatewayName}-auth -n ${gatewayNS} -o=jsonpath='{.status.conditions[?(@.type=="Accepted")].message}'**
AuthPolicy has been accepted
----

